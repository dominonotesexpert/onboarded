{
  "version": 3,
  "sources": ["../../../app/routes/dashboard.tsx", "../../../node_modules/remix-utils/build/react/use-event-source.js"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/dashboard.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/dashboard.tsx\");\n  import.meta.hot.lastModified = \"1763421219974.8647\";\n}\n// REMIX HMR END\n\nimport { json } from \"@remix-run/node\";\nimport { Link, useLoaderData } from \"@remix-run/react\";\nimport { useState } from \"react\";\nimport { listExecutions } from \"~/services/execution/execution-service.server\";\nimport { useEventSource } from \"remix-utils/sse/react\";\nexport async function loader({}) {\n  const executions = await listExecutions();\n  return json({\n    executions\n  });\n}\nexport default function DashboardRoute() {\n  _s();\n  const {\n    executions\n  } = useLoaderData();\n  const [activeExecutionId, setActiveExecutionId] = useState(executions[0]?.id);\n  const event = useEventSource(activeExecutionId ? `/api/executions/${activeExecutionId}/stream` : null);\n  const liveEvent = event ? JSON.parse(event) : null;\n  return <div className=\"px-8 py-10 space-y-8\">\n      <header className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-xs uppercase tracking-[0.4em] text-white/50\">Monitoring</p>\n          <h2 className=\"text-3xl font-semibold text-white\">Execution Dashboard</h2>\n        </div>\n        <Link to=\"/workflows\" className=\"btn-secondary\">\n          Manage Workflows\n        </Link>\n      </header>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        {executions.map(execution => <button key={execution.id} onClick={() => setActiveExecutionId(execution.id)} className={`card text-left ${activeExecutionId === execution.id ? \"border-blue-400/60\" : \"\"}`}>\n            <p className=\"text-xs uppercase tracking-[0.3em] text-white/50\">{execution.status}</p>\n            <p className=\"text-lg text-white font-semibold mt-1\">{execution.workflowId}</p>\n            <p className=\"text-xs text-white/60 mt-2\">\n              {execution.duration ? `${execution.duration} ms` : \"Processing\"}\n            </p>\n          </button>)}\n      </div>\n\n      <section className=\"card space-y-4\">\n        <p className=\"text-sm uppercase tracking-[0.4em] text-white/50\">Live Event Stream</p>\n        <pre className=\"bg-black/30 rounded-2xl text-xs text-emerald-200 p-4 h-64 overflow-auto\">\n          {liveEvent ? JSON.stringify(liveEvent, null, 2) : \"Awaiting events...\"}\n        </pre>\n      </section>\n    </div>;\n}\n_s(DashboardRoute, \"RDSjtEh3ZBmeDschGGJsDboSSyo=\", false, function () {\n  return [useLoaderData, useEventSource];\n});\n_c = DashboardRoute;\nvar _c;\n$RefreshReg$(_c, \"DashboardRoute\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "import { createContext, useContext, useEffect, useState } from \"react\";\nconst context = createContext(new Map());\nexport const EventSourceProvider = context.Provider;\n/**\n * Subscribe to an event source and return the latest event.\n * @param url The URL of the event source to connect to\n * @param options The options to pass to the EventSource constructor\n * @returns The last event received from the server\n */\nexport function useEventSource(url, { event = \"message\", init, enabled = true } = {}) {\n    let map = useContext(context);\n    let [data, setData] = useState(null);\n    useEffect(() => {\n        if (!enabled) {\n            return undefined;\n        }\n        let key = [url.toString(), init?.withCredentials].join(\"::\");\n        let value = map.get(key) ?? {\n            count: 0,\n            source: new EventSource(url, init),\n        };\n        ++value.count;\n        map.set(key, value);\n        value.source.addEventListener(event, handler);\n        // rest data if dependencies change\n        setData(null);\n        function handler(event) {\n            setData(event.data || \"UNKNOWN_EVENT_DATA\");\n        }\n        return () => {\n            value.source.removeEventListener(event, handler);\n            --value.count;\n            if (value.count <= 0) {\n                value.source.close();\n                map.delete(key);\n            }\n        };\n    }, [url, event, init, map, enabled]);\n    return data;\n}\n"],
  "mappings": "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",
  "names": ["import_react", "event"]
}
